// Assignment 5

// Q3 B

//ASSIGNMENT-5 QUESTION-3

LXI SP,7FFFH
MVI C,0AH
LXI H,4000H
L1:
CALL BCD2HEX
INX H
DCR C
JNZ L1
LXI H,4000
CALL XOVER
MVI B,0AH
LXI H,4000H
L4:
CALL HEX2BCD
CALL ADDDATABLOCK //LINKED LIST
INX H
DCR B
JNZ L4
HLT

BCD2HEX:
MOV A,M
ANI F0H	
RAR
RAR
RAR
RAR
ADD A	
MOV B,A	
ADD A	
ADD A	
ADD B	
MOV B,A
MOV A,M
ANI 0FH
ADD B
MOV M,A	
RET

HEX2BCD:
MVI D,00H
XRA A
MOV C,M
PUSH H
MVI H,80
LOOP:
ADI 01H
DAA
JNC GOAHEAD
INR D
//MVI B,80H
GOAHEAD:
DCR C
JNZ LOOP
MOV C,A
MOV A,D
ORA B
MOV D,A
MOV A,C
POP H
RET

//CODE FOR XOVER
//THE XOVER IS COMPUTED AND STORED IN THEIR ORIGINAL POSITIONS
XOVER:
MVI L,00H
MVI C,09H
L2:
MVI H,50H
MOV B,M
MVI H,40H
MOV D,M
MOV A,L
ADD C
MOV L,A
MOV E,M
PUSH H
MVI A,FFH
L3:
RAL
ADI 00
DCR B
JNZ L3
MOV H,A
ANA D
MOV B,A
MOV A,H
CMA
ANA E
ADD B
MOV B,A
MOV A,H
ANA E
MOV L,A
MOV A,H
CMA
ANA D
ADD L
MOV E,A
MOV D,B
POP H
MOV M,E
MOV A,L
SUB C
MOV L,A
MOV M,D
INX H
DCR C
DCR C
JP L2
RET;

ADDDATABLOCK: 
PUSH H
LHLD 7050H
MOV M,D//storing DB1
INR L
MOV M,A//storing DB2
INR L
MOV M,H//storing NA1
MOV A,L
ADI 02H
INR L
MOV M,A//storing NA2
INR L
SHLD 7050H
POP H
RET


#ORG 4000H 
#DB 29H,35H,48H,70H,85H,15H,63H,89H,41H,67H
#ORG 5000H
#DB 05H,04H,03H,02H,04H
#ORG 7050H
#DB 00H,90H